<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PULSA MUSIC CONECT | O Futuro da Tradição</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

    <div id="cursor-aura"></div>
    <div class="bg-scene">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <nav class="glass-nav">
        <a href="/" class="logo">
            <img src="{{ url_for('static', filename='img/conect1.png') }}" alt="PULSAMUSICCONECT" class="logo-img">
        </a>

        <div class="mobile-menu-icon" id="mobile-menu-trigger">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>

        <div class="nav-actions" id="nav-links">
            {% if session.get('user_email') %}
                <a href="/artistas?tipo=dj" class="btn-nav-flat">DJs</a>
                <a href="/artistas?tipo=músico" class="btn-nav-flat">MÚSICOS</a>
                <a href="/artistas?tipo=banda" class="btn-nav-flat">BANDAS</a>
                <a href="/palco" class="btn-plasma-small">ESTABELECIMENTOS</a>
                <a href="/dashboard" class="btn-user-status">PAINEL</a>
                <a href="/logout" class="btn-logout-index">SAIR</a>
            {% else %}
                <a href="/" class="btn-nav-flat">HOME</a>
                <a href="/artistas?tipo=dj" class="btn-nav-flat">DJs</a>
                <a href="/artistas?tipo=músico" class="btn-nav-flat">MÚSICOS</a>
                <a href="/artistas?tipo=banda" class="btn-nav-flat">BANDAS</a>
                <a href="/palco" class="btn-nav-flat">ESTABELECIMENTOS</a>
                <a href="/dashboard" class="btn-plasma-small">MEMBRO</a>
            {% endif %}
        </div>
    </nav>

    <header class="hero">
    <div class="hero-content">
        <h1 class="hero-main-title">PULSA</h1>
        <h2 class="sub-hero">MUSIC CONECT</h2>
        <div class="hero-divider"></div>
        <p class="hero-tagline">Descubra o universo da música: conecte-se com profissionais, lojas e estúdios que fazem a cena pulsar.</p>
        
        <div class="hero-actions">
            <a href="/login" class="btn-plasma btn-neon">QUERO ME CADASTRAR</a>
            <a href="#artistas" class="btn-plasma btn-outline">EXPLORAR ARTISTAS</a>
        </div>
    </div>
</header>
<div class="music-marquee">
    <div class="marquee-track">
        <div class="marquee-content">
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
        </div>
        <div class="marquee-content" aria-hidden="true">
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
        </div>
    </div>
</div>
<main class="gallery-section" id="destaques">
    {% if destaques %}
    <section class="highlights-section">
        <div class="highlights-container">
            <div class="section-title-area" style="text-align: center; margin-bottom: 30px;">
                <h2 class="highlights-main-title">DESTAQUES PULSA MUSIC</h2>
                <p class="highlights-subtitle">Conheça os talentos que estão fazendo a cena pulsar agora.</p>
            </div>

            <div class="swiper highlightsSwiper">
                <div class="swiper-wrapper">
                    {% for musico in destaques %}
                        {% set url_foto = musico.foto if musico.foto else '/static/img/default.jpg' %}
                        <div class="swiper-slide" style="width: auto;">
                            <div class="high-card" style="--bg-image: url('{{ url_foto }}');">
                                <div class="high-image"></div>
                                <div class="high-overlay">
                                    <span class="high-category">{{ musico.estilo | upper }}</span>
                                    <h3>{{ musico.nome | upper }}</h3>
                                    <p>{{ (musico.cidade or "") | truncate(25) }}</p>
                                    <a href="{{ url_for('perfil_musico', musico_id=musico.id) }}" class="btn-high-view">VER PERFIL</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                </div>
        </div>
    </section>
    {% else %}
    <div class="empty-highlights-wrapper">
        <div class="placeholder-card-neon">
            <div class="neon-icon-area">
                <i data-lucide="mic-2"></i> </div>
            <h3 class="placeholder-title">NOVOS DESTAQUES EM BREVE</h3>
            <p class="placeholder-text">Estamos selecionando os melhores talentos para brilhar aqui. Seja o próximo!</p>
            <a href="/login" class="btn-placeholder-action">QUERO ME DESTACAR</a>
        </div>
    </div>
    {% endif %}
</main>

<main class="gallery-section" id="artistas">
    <div class="discovery-header-saas">
        <h2>Explorar Artistas e Bandas</h2>
        <p class="local-subtitle" style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 5px;">
            Encontre talentos na sua cidade e explore novos estilos musicais.
        </p>
    </div>

    <div class="filter-section-header">
        <div class="music-filter-wrapper">
            <div class="search-group">
                <h3 class="music-filter-title">FILTRE POR CIDADE</h3>
                <form action="/#artistas" method="GET" class="filter-form" id="cityForm">
                    <div class="music-select-box" id="cityFilterContainer">
                        <div class="music-select-btn" id="cityTrigger">
                            <input type="text" id="city-search" class="filter-input" 
                                   placeholder="{% if cidade_nome %}{{ cidade_nome | upper }}{% else %}TODAS AS CIDADES{% endif %}" 
                                   autocomplete="off">
                            <i data-lucide="chevron-down"></i>
                        </div>

                        <div class="music-options-list">
                            <div class="music-opt-item {% if not cidade_nome %}active{% endif %}" data-filter="all">
                                Todas as Cidades
                            </div>
                            {% for cidade in cidades_disponiveis %}
                                <div class="music-opt-item {% if cidade == cidade_nome %}active{% endif %}" data-filter="{{ cidade }}">
                                    {{ cidade }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <input type="hidden" name="cidade" id="hiddenCityInput" value="{{ cidade_nome if cidade_nome else '' }}">
                </form>
            </div>

            <div class="search-group">
                <h3 class="music-filter-title">FILTRE POR GÊNERO</h3>
                <div class="music-select-box" id="genreFilterContainer">
                    <div class="music-select-btn" id="genreTrigger">
                        <input type="text" id="genre-search" class="filter-input" 
                               placeholder="TODOS OS ESTILOS" 
                               autocomplete="off">
                        <i data-lucide="chevron-down"></i>
                    </div>
                    <div class="music-options-list">
                        <div class="music-opt-item active" data-filter="all">Todos os Estilos</div>
                        {% for estilo in estilos %}
                            <div class="music-opt-item" data-filter="{{ estilo | lower | replace(' ', '-') | replace('/', '') }}">
                                {{ estilo }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="artist-grid">
        {% for musico in musicos %}
            <a href="/musico/{{ musico.id }}" class="modern-card" data-tilt 
               data-estilo="{{ musico.estilo | lower | replace(' ', '-') | replace('/', '') }}"
               data-cidade="{{ musico.cidade }}">
                <div class="card-image" style="background-image: url('{{ musico.foto }}');"></div>
                
                <div class="card-overlay">
                    <div class="artist-main-info">
                        <h3>{{ musico.nome }}</h3>
                        <span class="btn-profile-link">
                            VER PERFIL <i class="fas fa-chevron-right" style="font-size: 0.6rem;"></i>
                        </span>
                    </div>
                    
                    <div class="glass-footer">
                        <div class="footer-line">
                            <span class="tag-genre">{{ musico.estilo }}</span>
                            <span class="tag-type">{{ musico.tipo }}</span>
                        </div>
                        
                        <div class="footer-line">
                            <span class="card-location">
                                <svg viewBox="0 0 24 24" width="10" height="10" fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                                {{ musico.cidade }}
                            </span>
                        </div>
                    </div>
                </div>
            </a>
        {% else %}
            <div class="search-placeholder" style="grid-column: 1 / -1; text-align: center; padding: 80px 20px;">
                <h3 style="color: #fff; font-family: 'Orbitron', sans-serif; font-weight: 800; text-transform: uppercase; opacity: 0.6;">
                    Nenhum artista encontrado nesta região
                </h3>
                <p style="color: #fff; opacity: 0.4;">Tente selecionar outra cidade ou estilo musical.</p>
            </div>
        {% endfor %}
    </div>
</main>


<div class="footer-divider-clean">
    <div class="line"></div>
    <div class="dot"></div>
    <div class="line"></div>
</div>


<footer class="main-footer">
    <div class="footer-content">
        <div class="footer-brand">
            <img src="static/img/conect1.png" alt="PULSAMUSICCONECT" class="logo-img">
            <p>Preservando a cultura, impulsionando talentos. A rede completa que une artistas, especialistas e infraestrutura.</p>
        </div>
        
        <div class="footer-links">
            <h4>Explorar</h4>
            <ul>
                <li><a href="/artistas?tipo=dj">DJs</a></li>
                <li><a href="/artistas?tipo=músico">Músicos</a></li>
                <li><a href="/artistas?tipo=banda">Bandas</a></li>
                <li><a href="/palco">Estabelecimentos</a></li>
            </ul>
        </div>

        <div class="footer-links">
            <h4>Plataforma</h4>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/dashboard">Área do Membro</a></li>
                <li><a href="/termos">Termos de Uso</a></li>
                <li><a href="/privacidade">Privacidade</a></li>
            </ul>
        </div>
    </div>
        <div class="footer-bottom-container">
            <p>&copy; 2026 Pulsa Music Conect. O Futuro da Tradição.</p>
        </div>
    </div>
</footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Inicializa os ícones do Lucide
        lucide.createIcons();
    </script>
</body>
</html>