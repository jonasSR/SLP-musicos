<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PULSA MUSIC CONECT | O Futuro da Tradição</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>

    <div id="cursor-aura"></div>
    <div class="bg-scene">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>
    <div class="vertical-brand v-1">
        <span>PULSA MUSIC <i data-lucide="music"></i> CONECTE-SE — 2026</span>
    </div>

    <div class="vertical-brand v-2">
        <span><i data-lucide="mic-2"></i> O FUTURO DA TRADIÇÃO — EXPLORE</span>
    </div>

    <div class="vertical-brand v-3">
        <span>PULSE AGORA <i data-lucide="disc"></i> DESCUBRA NOVOS SONS</span>
    </div>

    <nav class="glass-nav">
        <a href="/" class="logo">
            <img src="{{ url_for('static', filename='img/conect1.png') }}" alt="PULSAMUSICCONECT" class="logo-img">
        </a>

        <div class="mobile-menu-icon" id="mobile-menu-trigger">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>

        <div class="nav-actions" id="nav-links">
            {% if session.get('user_email') %}
                <a href="/artistas?tipo=dj" class="btn-nav-flat">DJs</a>
                <a href="/artistas?tipo=músico" class="btn-nav-flat">MÚSICOS</a>
                <a href="/artistas?tipo=banda" class="btn-nav-flat">BANDAS</a>
                <a href="/palco" class="btn-plasma-small">ESTABELECIMENTOS</a>
                <a href="/dashboard" class="btn-user-status">PAINEL</a>
                <a href="/logout" class="btn-logout-index">SAIR</a>
            {% else %}
                <a href="/" class="btn-nav-flat">HOME</a>
                <a href="/artistas?tipo=dj" class="btn-nav-flat">DJs</a>
                <a href="/artistas?tipo=músico" class="btn-nav-flat">MÚSICOS</a>
                <a href="/artistas?tipo=banda" class="btn-nav-flat">BANDAS</a>
                <a href="/palco" class="btn-nav-flat">ESTABELECIMENTOS</a>
                <a href="/dashboard" class="btn-plasma-small">MEMBRO</a>
            {% endif %}
        </div>
    </nav>

    <header class="hero">
    <div class="hero-content">
        <h1 class="hero-main-title">PULSA</h1>
        <h2 class="sub-hero">MUSIC CONECT</h2>
        <div class="hero-divider"></div>
        <p class="hero-tagline">Descubra o universo da música: conecte-se com profissionais, lojas e estúdios que fazem a cena pulsar.</p>
        
        <div class="hero-actions">
            <a href="/login" class="btn-plasma btn-neon">QUERO ME CADASTRAR</a>
            <a href="#artistas" class="btn-plasma btn-outline">EXPLORAR ARTISTAS</a>
        </div>
    </div>
</header>
<div class="music-marquee">
    <div class="marquee-track">
        <div class="marquee-content">
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
        </div>
        <div class="marquee-content" aria-hidden="true">
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
            <span>CONECTE-SE</span>
            <i data-lucide="music"></i>
            <span>CRIE</span>
            <i data-lucide="mic-2"></i>
            <span>PULSE</span>
            <i data-lucide="disc"></i>
        </div>
    </div>
</div>


<main class="gallery-section" id="destaques">
    {% if destaques %}
    <section class="highlights-section">
        <div class="highlights-container">
            <div class="section-title-area" style="text-align: center; margin-bottom: 30px; margin-top: -40px;">
                <h2 class="highlights-main-title">DESTAQUES PULSA MUSIC</h2>
                <p class="highlights-subtitle" style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 5px;">
                    Conheça os talentos que estão fazendo a cena pulsar agora.
                </p>
            </div>

            <div class="swiper highlightsSwiper">
                <div class="swiper-wrapper">
                    {% for musico in destaques %}
                        {% set url_foto = musico.foto if musico.foto else '/static/img/default.jpg' %}
                        <div class="swiper-slide" style="width: auto;">
                            <a href="{{ url_for('perfil_musico', musico_id=musico.id) }}" class="high-card" style="--bg-image: url('{{ url_foto }}'); text-decoration: none;">
                                <div class="mobile-cta-badge">
                                    <span>VER PERFIL</span>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="high-badge-container">
                                    <i class="fas fa-award badge-symbol"></i>
                                    <span class="badge-label">Destaque</span>
                                    
                                    <span class="badge-score">{{ musico.media_estrelas }}</span>
                                    <i class="fas fa-star badge-star-icon"></i>

                                    <div class="badge-divider"></div> 
                                    
                                    <i class="fas fa-eye badge-view-icon"></i>
                                    <span class="badge-visits">{{ musico.total_cliques or '0' }}</span>
                                </div>
                                <div class="high-image"></div>

                                <div class="high-overlay">
                                    {% for m in destaques %}
                                        <span class="stat-value">{{ "%.1f"|format(m.media_estrelas|float) }}</span>
                                    {% endfor %}
                                    <div class="high-glass-footer">
                                        <div class="high-footer-line">
                                            <div class="high-location">
                                                <i class="fas fa-location-dot"></i>
                                                {{ (musico.cidade or "Brasil") | truncate(20) }}
                                            </div>
                                            <span class="high-tag-type">MÚSICO</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="section-spray-badge">
            <svg viewBox="0 0 400 185" xmlns="http://www.w3.org/2000/svg"
                style="position:absolute;inset:0;width:100%;height:100%;z-index:1;overflow:visible;">
                <defs>
                    <filter id="ink" x="-20%" y="-20%" width="140%" height="140%">
                        <feTurbulence type="fractalNoise" baseFrequency="0.035 0.05"
                                    numOctaves="5" seed="12" result="noise"/>
                        <feDisplacementMap in="SourceGraphic" in2="noise"
                                        scale="16" xChannelSelector="R" yChannelSelector="G"
                                        result="displaced"/>
                        <feGaussianBlur in="displaced" stdDeviation="2.5" result="blurred"/>
                        
                        <feColorMatrix in="blurred" type="matrix"
                            values="0 0 0 0 0.07
                                    0 0 0 0 0.07
                                    0 0 0 0 0.07
                                    0 0 0 25 -10"
                            result="threshold"/>
                        
                        <feComposite in="threshold" in2="threshold" operator="over"/>
                        <feDropShadow dx="0" dy="4" stdDeviation="10"
                                    flood-color="#000000" flood-opacity="0.5"/>
                    </filter>
                </defs>
                <g filter="url(#ink)">
                    <ellipse cx="195" cy="95"  rx="175" ry="76" fill="#121212"/>
                    <ellipse cx="52"  cy="58"  rx="44"  ry="26" fill="#121212"/>
                    <ellipse cx="348" cy="118" rx="38"  ry="22" fill="#121212"/>
                    <ellipse cx="125" cy="28"  rx="58"  ry="20" fill="#121212"/>
                    <ellipse cx="275" cy="155" rx="60"  ry="22" fill="#121212"/>
                    <ellipse cx="320" cy="42"  rx="36"  ry="18" fill="#121212"/>
                    <ellipse cx="68"  cy="148" rx="32"  ry="16" fill="#121212"/>
                    <ellipse cx="380" cy="88"  rx="22"  ry="30" fill="#121212"/>
                    <circle  cx="15"  cy="92"  r="12" fill="#121212"/>
                    <circle  cx="10"  cy="72"  r="7"  fill="#121212"/>
                    <circle  cx="388" cy="62"  r="9"  fill="#121212"/>
                    <circle  cx="205" cy="6"   r="8"  fill="#121212"/>
                    <circle  cx="160" cy="168" r="10" fill="#121212"/>
                    <circle  cx="28"  cy="120" r="7"  fill="#121212"/>
                    <circle  cx="372" cy="140" r="8"  fill="#121212"/>
                    <circle  cx="88"  cy="175" r="6"  fill="#121212"/>
                    <circle  cx="340" cy="20"   r="5"  fill="#121212"/>
                </g>
            </svg>

            <div class="ink-text">
                <span>DESTAQUES PULSA</span>
                <span>MUSIC CONECT</span>
            </div>

        </div>

    </section>
    {% else %}
    <div class="empty-highlights-wrapper">
        <div class="placeholder-card-neon">
            <div class="neon-icon-area"><i data-lucide="mic-2"></i></div>
            <h3 class="placeholder-title">NOVOS DESTAQUES EM BREVE</h3>
            <p class="placeholder-text">Estamos selecionando os melhores talentos para brilhar aqui. Seja o próximo!</p>
            <a href="/login" class="btn-placeholder-action">QUERO ME DESTACAR</a>
        </div>
    </div>
    {% endif %}
</main>

<main class="gallery-section" id="artistas">
    <div class="discovery-header-saas">
        <h2>Explorar Artistas e Bandas</h2>
        <p class="local-subtitle" style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 5px;">
            Encontre talentos na sua cidade e explore novos estilos musicais.
        </p>
    </div>

    <div class="filter-section-header">
        <div class="music-filter-wrapper">
            <div class="search-group">
                <h3 class="music-filter-title">FILTRE POR CIDADE</h3>
                <form action="/#artistas" method="GET" class="filter-form" id="cityForm">
                    <div class="music-select-box" id="cityFilterContainer">
                        <div class="music-select-btn" id="cityTrigger">
                            <input type="text" id="city-search" class="filter-input" 
                                   placeholder="{% if cidade_nome %}{{ cidade_nome | upper }}{% else %}TODAS AS CIDADES{% endif %}" 
                                   autocomplete="off">
                            <i data-lucide="chevron-down"></i>
                        </div>

                        <div class="music-options-list">
                            <div class="music-opt-item {% if not cidade_nome %}active{% endif %}" data-filter="all">
                                Todas as Cidades
                            </div>
                            {% for cidade in cidades_disponiveis %}
                                <div class="music-opt-item {% if cidade == cidade_nome %}active{% endif %}" data-filter="{{ cidade }}">
                                    {{ cidade }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <input type="hidden" name="cidade" id="hiddenCityInput" value="{{ cidade_nome if cidade_nome else '' }}">
                </form>
            </div>

            <div class="search-group">
                <h3 class="music-filter-title">FILTRE POR GÊNERO</h3>
                <div class="music-select-box" id="genreFilterContainer">
                    <div class="music-select-btn" id="genreTrigger">
                        <input type="text" id="genre-search" class="filter-input" 
                               placeholder="TODOS OS ESTILOS" 
                               autocomplete="off">
                        <i data-lucide="chevron-down"></i>
                    </div>
                    <div class="music-options-list">
                        <div class="music-opt-item active" data-filter="all">Todos os Estilos</div>
                        {% for estilo in estilos %}
                            <div class="music-opt-item" data-filter="{{ estilo | lower | replace(' ', '-') | replace('/', '') }}">
                                {{ estilo }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="artist-grid">
        {% for musico in musicos %}
            <a href="/musico/{{ musico.id }}" class="modern-card" data-tilt 
               data-estilo="{{ musico.estilo | lower | replace(' ', '-') | replace('/', '') }}"
               data-cidade="{{ musico.cidade }}">
                <div class="card-image" style="background-image: url('{{ musico.foto }}');"></div>
                
                <div class="card-overlay">
                    <div class="artist-main-info">
                        <h3>{{ musico.nome }}</h3>
                        <span class="btn-profile-link">
                            VER PERFIL <i class="fas fa-chevron-right" style="font-size: 0.6rem;"></i>
                        </span>
                    </div>
                    
                    <div class="glass-footer">
                        <div class="footer-line">
                            <span class="tag-genre">{{ musico.estilo }}</span>
                            <span class="tag-type">{{ musico.tipo }}</span>
                        </div>
                        
                        <div class="footer-line">
                            <span class="card-location">
                                <svg viewBox="0 0 24 24" width="10" height="10" fill="none" stroke="currentColor" stroke-width="3">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                                {{ musico.cidade }}
                            </span>
                        </div>
                    </div>
                </div>
            </a>
        {% else %}
            <div class="search-placeholder" style="grid-column: 1 / -1; text-align: center; padding: 80px 20px;">
                <h3 style="color: #fff; font-family: 'Orbitron', sans-serif; font-weight: 800; text-transform: uppercase; opacity: 0.6;">
                    Nenhum artista encontrado nesta região
                </h3>
                <p style="color: #fff; opacity: 0.4;">Tente selecionar outra cidade ou estilo musical.</p>
            </div>
        {% endfor %}
    </div>
</main>


<div class="footer-divider-clean">
    <div class="line"></div>
    <div class="dot"></div>
    <div class="line"></div>
</div>


<footer class="main-footer">
    <div class="footer-content">
        <div class="footer-brand">
            <img src="static/img/conect1.png" alt="PULSAMUSICCONECT" class="logo-img">
            <p>Preservando a cultura, impulsionando talentos. A rede completa que une artistas, especialistas e infraestrutura.</p>
        </div>
        
        <div class="footer-links">
            <h4>Explorar</h4>
            <ul>
                <li><a href="/artistas?tipo=dj">DJs</a></li>
                <li><a href="/artistas?tipo=músico">Músicos</a></li>
                <li><a href="/artistas?tipo=banda">Bandas</a></li>
                <li><a href="/palco">Estabelecimentos</a></li>
            </ul>
        </div>

        <div class="footer-links">
            <h4>Plataforma</h4>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/dashboard">Área do Membro</a></li>
                <li><a href="/termos">Termos de Uso</a></li>
                <li><a href="/privacidade">Privacidade</a></li>
            </ul>
        </div>
    </div>
        c
    </div>
</footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Inicializa os ícones do Lucide
        lucide.createIcons();
    </script>
</body>
</html>