<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Acesso Artista | Pulsa S√£o Luiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script type="module" src="{{ url_for('static', filename='js/auth.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    
</head>

<body class="login-page-root">
{% if confirmacao_venda %}
<div id="modal-boas-vindas" class="modal-overlay" style="display:flex;">
    <div class="modal-content glass-card">
        <h3 style="color:#00ffcc;">Pagamento Confirmado! üöÄ</h3>

        <p style="margin-top:15px; color:#fff;">
            Para finalizar seu cadastro, defina uma senha de acesso:
        </p>

        <div style="margin-top:20px; text-align:left;">
            <label style="color:#ccc; font-size:0.8rem;">E-mail de acesso:</label>
            <input type="email" id="email_final" value="{{ email_preenchido }}" readonly 
                style="width:100%; padding:10px; background:rgba(255,255,255,0.1); border:1px solid #444; color:#888; border-radius:5px; cursor:not-allowed;">
        </div>

        <div style="margin-top:15px; text-align:left;">
            <label style="color:#ccc; font-size:0.8rem;">Crie sua senha:</label>
            <input type="password" id="senha_final" placeholder="M√≠nimo 7 caracteres"
                style="width:100%; padding:10px; background:rgba(0,0,0,0.2); border:1px solid #00ffcc; color:#fff; border-radius:5px;">
        </div>

        <button id="btn-finalizar-venda" class="log-btn-main" style="margin-top:25px; width:100%;">
            IR PARA O PAINEL
        </button>
    </div>
</div>
{% endif %}

    <div class="log-bg-mesh"></div>

    <div class="log-card-container">
        <a href="{{ url_for('index') }}" class="btn-back-home">
            <span>‚Üê</span> Voltar
        </a>

        <h1 class="log-glitch-title">Acesso ao <span>Painel</span></h1>
        <p class="log-subtitle">Gest√£o de Perfil | Pulsa Music Conect.</p>

        <form id="auth-form" class="log-form-wrapper">
            <div class="log-field-group">
                <input type="email" id="email" class="log-input-field" required placeholder=" ">
                <label class="log-field-label">E-MAIL CORPORATIVO OU ART√çSTICO</label>
            </div>

            <div class="log-field-group log-pass-group">
                <input type="password" id="password" class="log-input-field" required minlength="7" placeholder=" ">
                <label class="log-field-label">SENHA (M√çN. 7 CARACTERES)</label>

                <button type="button" class="log-toggle-eye" aria-label="Mostrar senha">
                    üëÅ
                </button>
            </div>

            <button type="submit" id="btn-login" class="log-btn-main">
                CONECTAR
            </button>

            <button type="button" id="btn-signup" class="log-btn-main log-btn-outline">
                CRIAR CONTA
            </button>

            <div id="modal-auth" class="modal-overlay">
                <div class="modal-content glass-card">
                    <span class="close-modal" id="btn-close-x">&times;</span>
                    <h3 id="modal-title">Aten√ß√£o</h3>
                    <p id="modal-text">Preencha o usu√°rio e a senha e clique em criar conta.</p>
                    <button type="button" class="log-btn-main" id="btn-modal-confirm" style="width: 100%; margin-top: 15px;">ENTENDI</button>
                </div>
            </div>

            <button type="button" onclick="loginComGoogle()" class="google-btn-modern">
                <div class="google-icon-wrapper">
                    <img class="google-icon" src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
                </div>
                <span class="btn-text">ENTRAR COM GOOGLE</span>
            </button>

        </form>
    </div>

<div id="modal-escolha-perfil" class="modal-overlay">
    <div class="modal-content glass-card">
        <button type="button" class="btn-fechar-modal" onclick="document.getElementById('modal-escolha-perfil').style.display='none'">
            &times;
        </button>

        <h3>COMO DESEJA ENTRAR?</h3>
        <p>Selecione seu tipo de perfil para continuar:</p>
        
        <div class="opcoes-perfil">
            <button type="button" class="btn-perfil" id="btn-escolha-musico">
                <i class="fas fa-guitar icon-grande"></i>
                <span class="titulo-btn">Sou Artista</span>
                <span class="subtitulo-btn">Crie seu perfil e seja encontrado</span>
            </button>
            
            <button type="button" class="btn-perfil" id="btn-escolha-empresa">
                <i class="fas fa-store icon-grande"></i>
                <span class="titulo-btn">Sou Estabelecimento</span>
                <span class="subtitulo-btn">Encontre artistas para seu local</span>
            </button>
        </div>
    </div>
</div>

    <div id="modal-retomar-cadastro" class="modal-overlay">
        <div class="modal-content glass-card">
            <h3 style="color: #ffcc00;">Cadastro em Aberto</h3>
            <p>Vimos que voc√™ parou seu cadastro como: <br>
            <strong id="tipo-pendente" style="color: #fff; font-size: 1.2em;"></strong>
            </p>
            <p style="font-size: 0.9em; color: #ccc;">Deseja continuar?</p>
            
            <div class="opcoes-perfil">
                <button type="button" class="btn-perfil" id="btn-retomar-sim" style="background: #00ff88; color: #000;">
                    CONTINUAR CADASTRO
                </button>
                
                <button type="button" class="btn-perfil btn-perfil-cancelar" id="btn-retomar-nao">
                    SAIR E CONTINUAR DEPOIS
                </button>
            </div>
        </div>
    </div>

    
    <script>
        // Colocamos aspas para o editor achar que √© uma String comum
        // O | safe garante que o Flask n√£o quebre os caracteres
        const configData = '{{ firebase_config | tojson | safe }}';
        
        // Agora transformamos essa string em um objeto de verdade
        window.firebaseConfig = JSON.parse(configData);
        
        console.log("üî• Configura√ß√£o do Firebase injetada!");
    </script>
    <script type="module" src="{{ url_for('static', filename='js/auth.js') }}"></script>
</body>
</html>